{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "const Obstacle = require(\"Obstacle\");\n\n\n//stae of goose\nvar State = cc.Enum({\n    None   : -1,\n    Run    : -1,\n    Jump   : -1,\n    Drop   : -1,\n    DropEnd: -1,\n    Dead   : -1\n});\n\n\nvar Goose = cc.Class({\n    extends: cc.Component,\n    properties: {\n        maxY: 0,\n        groundY: 0,\n        gravity: 0,\n        initJumpSpeed: 0,\n        _state: {\n            default: State.None,\n            type: State,\n            visible: false\n        },\n        state: {\n            get: function () {\n                return this._state;\n            },\n            \n            /*\n                state setter, when state is set (changed), corresponding animation clip will be played\n            */\n            set: function(value){\n                if (value !== this._state) {\n                    this._state = value;\n                    if (this._state !== State.None) {\n                        var animName = State[this._state];\n                        this.anim.stop();\n                        this.anim.play(animName);\n                    }\n                }\n            },\n            type: State\n        },\n        jumpAudio: {\n            default: null,\n            url: cc.AudioClip\n        },\n    },\n    statics: {\n        State: State\n    },\n\n\n    init (game) {\n        this.game = game;\n        this.anim = this.getComponent(cc.Animation);\n        this.currentSpeed = 0;\n        this.sprite = this.getComponent(cc.Sprite);\n        this.registerInput();\n        \n        this.groundY = this.node.y;\n    },\n    \n    startRun () {\n        this.state = State.Run;\n        this.enableInput(true);\n    },\n    \n    registerInput () {\n        cc.eventManager.addListener({\n            event: cc.EventListener.KEYBOARD,\n            onKeyPressed: function(keyCode, event) {\n                this.jump();\n            }.bind(this)\n        }, this.node);\n        // touch input\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            onTouchBegan: function(touch, event) {\n                this.jump();\n                return true;\n            }.bind(this)\n        }, this.node);\n    },\n    \n    enableInput: function (enable) {\n        if (enable) {\n            cc.eventManager.resumeTarget(this.node);\n        } else {\n            cc.eventManager.pauseTarget(this.node);\n        }\n    },\n\n    update (dt) {\n        if (this.state === State.None || this.state === State.Dead) {\n            return;\n        }\n        this._updateState(dt);\n        this._updatePosition(dt);\n    },\n    \n\n    jump: function () {\n        this.state = State.Jump;\n        this.currentSpeed = this.initJumpSpeed;\n        // cc.audioEngine.playEffect(this.jumpAudio);\n    },\n\n    /*\n        collision detection\n        when collide, call obstacle's \"gooseVisit\" -- part of Visitor pattern\n    */\n    onCollisionEnter: function (other, self) {\n        other.getComponent(Obstacle).gooseVisit();\n    },\n\n\n\n\n\n\n    _updateState (dt) {\n        switch (this.state) {\n            case Goose.State.Jump:\n                if (this.currentSpeed < 0) {\n                    this.state = State.Drop;\n                }\n                break;\n            case Goose.State.Drop:\n                if (this.node.y < this.groundY) {\n                    this.node.y = this.groundY;\n                    this.state = State.DropEnd;\n                }\n                break;\n        }\n    },\n    \n    _updatePosition (dt) {\n        var flying = this.state === Goose.State.Jump || this.node.y > this.groundY;\n        if (flying) {\n            this.currentSpeed -= dt * this.gravity;\n            this.node.y += dt * this.currentSpeed;\n            if (this.node.y > this.maxY) {\n                this.node.y = maxY;\n            }\n        }\n    },\n    \n});"
  ]
}